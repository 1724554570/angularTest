angular.module("testApp").controller("proController",["$scope","$state","cookie",function(t,r,o){if(t.nav={all:!1,pro:!0,qas:!1,abo:!1},t.info1="项目",o.get("isLogined")){var e=angular.fromJson(window.localStorage.getItem("login.users"));t.isLogin=e||angular.fromJson(o.get("login.users.name"))||""}}]).controller("proListController",["$scope","$state","productService","localStorage",function(t,r,o,e){e.setValue("_csrf",""),t.artLists=function(){o.getProduct({},function(r){t.product=r.data.pro})},t.artLists()}]).controller("proArtDescController",["$scope","$state","productService","$stateParams",function(t,r,o,e){t.times=function(t){var r=1e3*parseInt(t);return new Date(r).toLocaleString().substr(0,10)},t.product={},t.getProductInfo=function(){var i=e.id;i||r.go("pro.list");var c={pro_id:i};o.getProductById(c,function(r){t.product=r.data.article,t.product._csrf=r.data.article.id})},t.getProductInfo()}]).controller("proArticleController",["$scope","$state","productService",function(t,r,o){t.isLogin||r.go("pro.list"),t._simpleConfig={toolbar:["source | undo redo | bold italic underline strikethrough | superscript subscript | forecolor backcolor | removeformat |","insertorderedlist insertunorderedlist | selectall cleardoc paragraph | fontfamily fontsize","| justifyleft justifycenter justifyright justifyjustify |","link unlink | emotion image video  | map","| horizontal print preview fullscreen","drafts","formula"],initialFrameWidth:"100%",initialFrameHeight:400,autoClearinitialContent:!0,wordCount:!1,elementPathEnabled:!1,autoFloatEnabled:!1},t.content2="",t.product={},t.product.users=t.isLogin.uid,t.product.productname="",t.product.productdesc="",t.product.propower="",t.product._csrf="",t.submitFun=function(){if(""==t.product.propower||""==t.product.productname||""==t.product.productdesc)return void alert("参数不足");var e={id:t.product._csrf,users:t.isLogin.uid,productname:t.product.productname,productdesc:t.product.productdesc,propower:t.product.propower,token:"saveArticle"};o.saveProduct(e,function(t){t.data.pro&&r.go("pro.list")})}}]).controller("proArticleEidtController",["$scope","$state","productService","$stateParams","vaulesFactory","localStorage",function(t,r,o,e,i,c){t.product={},t.product.productname="",t.product.productdesc="",t.product.propower="",t.product._csrf="",t._simpleConfig={toolbar:["source | undo redo | bold italic underline strikethrough | superscript subscript | forecolor backcolor | removeformat |","insertorderedlist insertunorderedlist | selectall cleardoc paragraph | fontfamily fontsize","| justifyleft justifycenter justifyright justifyjustify |","link unlink | emotion image video  | map","| horizontal print preview fullscreen","drafts","formula"],initialFrameWidth:"100%",initialFrameHeight:400,autoClearinitialContent:!0,wordCount:!1,elementPathEnabled:!1,autoFloatEnabled:!1},t.content2="",t.getProductInfo=function(){var r=i.getter(),e="";r&&(e=r.id,c.setValue("_csrf",r.id)),c.getValue("_csrf")&&(e=c.getValue("_csrf"));var n={pro_id:e};o.getProductById(n,function(r){t.product=r.data.article,t.product._csrf=r.data.article.id})},t.getProductInfo(),t.submitFun=function(){if(""==t.product.propower||""==t.product.productname||""==t.product.productdesc)return void alert("参数不足");var e={id:t.product._csrf,productname:t.product.productname,productdesc:t.product.productdesc,propower:t.product.propower,token:token.token};o.saveProduct(e,function(t){t.pro?r.go("pro.list"):0!==t.status||t.pro||r.go("pro.list")})}}]);