angular.module("testApp").controller("proController",["$scope","$state","productService","cookie","localStorage",function(o,t,r,e,c){if(o.nav={all:!1,pro:!0,qas:!1,abo:!1},o.info1="项目",e.get("isLogined")){var i=angular.fromJson(window.localStorage.getItem("login.users"));o.isLogin=i||angular.fromJson(e.get("login.users.name"))||""}}]).controller("proListController",["$scope","$state","productService","vaulesFactory","localStorage",function(o,t,r,e,c){c.setValue("_csrf",""),o.times=function(o){var t=1e3*parseInt(o);return new Date(t).toLocaleString().substr(0,10)},r.getProduct(function(t){o.product=t}),o.showSimple=function(o){e.setter(o),t.go("pro.artdetail")}}]).controller("proArtDescController",["$scope","$state","productService","$stateParams",function(o,t,r,e){o.times=function(o){var t=1e3*parseInt(o);return new Date(t).toLocaleString().substr(0,10)},o.product={},o.getProductInfo=function(){var c=e.id;c||t.go("pro.list");var i={pro_id:c};r.getProductById(i,function(t){o.product=t,o.product._csrf=t.id})},o.getProductInfo()}]).controller("proArticleController",["$scope","$state","productService",function(o,t,r){o.isLogin||t.go("pro.list"),o._simpleConfig={toolbar:["source | undo redo | bold italic underline strikethrough | superscript subscript | forecolor backcolor | removeformat |","insertorderedlist insertunorderedlist | selectall cleardoc paragraph | fontfamily fontsize","| justifyleft justifycenter justifyright justifyjustify |","link unlink | emotion image video  | map","| horizontal print preview fullscreen","drafts","formula"],initialFrameWidth:"100%",initialFrameHeight:400,autoClearinitialContent:!0,wordCount:!1,elementPathEnabled:!1,autoFloatEnabled:!1},o.content2="",o.product={},o.product.users=o.isLogin.uid,o.product.productname="",o.product.productdesc="",o.product.propower="",o.product._csrf="",o.submitFun=function(){if(""==o.product.propower||""==o.product.productname||""==o.product.productdesc)return void alert("参数不足");var e={id:o.product._csrf,users:o.isLogin.uid,productname:o.product.productname,productdesc:o.product.productdesc,propower:o.product.propower,token:"saveArticle"};r.saveProduct(e,function(o){o.pro&&t.go("pro.list")})}}]).controller("proArticleEidtController",["$scope","$state","productService","$stateParams","vaulesFactory","localStorage",function(o,t,r,e,c,i){o.product={},o.product.productname="",o.product.productdesc="",o.product.propower="",o.product._csrf="",o._simpleConfig={toolbar:["source | undo redo | bold italic underline strikethrough | superscript subscript | forecolor backcolor | removeformat |","insertorderedlist insertunorderedlist | selectall cleardoc paragraph | fontfamily fontsize","| justifyleft justifycenter justifyright justifyjustify |","link unlink | emotion image video  | map","| horizontal print preview fullscreen","drafts","formula"],initialFrameWidth:"100%",initialFrameHeight:400,autoClearinitialContent:!0,wordCount:!1,elementPathEnabled:!1,autoFloatEnabled:!1},o.content2="",o.getProductInfo=function(){var t=c.getter(),e="";t&&(e=t.id,i.setValue("_csrf",t.id)),i.getValue("_csrf")&&(e=i.getValue("_csrf"));var n={pro_id:e};r.getProductById(n,function(t){o.product=t,o.product._csrf=t.id})},o.getProductInfo(),o.submitFun=function(){if(""==o.product.propower||""==o.product.productname||""==o.product.productdesc)return void alert("参数不足");var e={id:o.product._csrf,productname:o.product.productname,productdesc:o.product.productdesc,propower:o.product.propower,token:token.token};r.saveProduct(e,function(o){o.pro?t.go("pro.list"):0!==o.status||o.pro||t.go("pro.list")})}}]);